#!/bin/bash

# Exit immediately if a command fails
set -e

# Run Spotless to format code
./mvnw spotless:apply

# Find and re-add only modified Java files to the commit
# This ensures only staged Java files are updated in the commit
for file in $(git diff --cached --name-only -- '*.java' '*.kt'); do
    git add "$file"
done

# Allow the commit to proceed
exit 0
